import time
import os
import math
import random

# ржХрж╛рж▓рзНржкржирж┐ржХ ржкрж░рж┐рж╕рзНржерж┐рждрж┐рж░ ржмрж░рзНржгржирж╛ ржПржмржВ ржЧрзНрж▓рзЛржмрж╛рж▓ ржнрзЗрж░рж┐рзЯрзЗржмрж▓
REACTOR_TEMP = 450.5  # ржкрзНрж░рж╛ржержорж┐ржХ рждрж╛ржкржорж╛рждрзНрж░рж╛
MELTDOWN_TEMP = 1500.0 # ржпрзЗ рждрж╛ржкржорж╛рждрзНрж░рж╛рзЯ ржмрж┐рж╕рзНржлрзЛрж░ржг ржШржЯржмрзЗ
PRESSURE = 120.0       # ржкрзНрж░рж╛ржержорж┐ржХ ржЪрж╛ржк
SECURITY_LAYERS = 7

def clear():
    os.system('cls' if os.name == 'nt' else 'clear')

def typing_effect(text, speed=0.02):
    for char in text:
        print(char, end='', flush=True)
        time.sleep(speed)
    print()

def show_status(layer):
    print("="*70)
    print(f"        тШвя╕П  ржХрзЗржирзНржжрзНрж░рзАрзЯ ржкрж╛рж░ржорж╛ржгржмрж┐ржХ ржирж┐рзЯржирзНрждрзНрж░ржг ржХржХрзНрж╖ - рж▓рзЗржнрзЗрж▓ {layer}  тШвя╕П")
    print("="*70)
    print(f"ржЪрзБрж▓рзНрж▓рж┐рж░ ржЕржмрж╕рзНржерж╛: [рждрж╛ржкржорж╛рждрзНрж░рж╛: {REACTOR_TEMP:.2f}┬░C] | [ржЪрж╛ржк: {PRESSURE:.2f} kPa]")
    print(f"ржирж┐рж░рж╛ржкрждрзНрждрж╛ рж╕рзНрждрж░: {layer}/7 ржЖржирж▓ржХ рж╣рзЯрзЗржЫрзЗ")
    print("-" * 70)

# рзз. ржЬрзНржпрзЛрждрж┐рж░рзНржкржжрж╛рж░рзНржержмрж┐ржЬрзНржЮрж╛ржи ржнрж┐рждрзНрждрж┐ржХ ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬ
def astrophysics_challenge():
    typing_effect("\n[рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓рзЗржнрзЗрж▓ рзз]: ржЬрзНржпрзЛрждрж┐рж░рзНржкржжрж╛рж░рзНржержмрж┐ржЬрзНржЮрж╛ржи ржоржбрж┐ржЙрж▓ред")
    typing_effect("ржПржХржЯрж┐ ржХрзГрж╖рзНржгржЧрж╣рзНржмрж░ (Black Hole) ржерзЗржХрзЗ рждржерзНржп ржЙржжрзНржзрж╛рж░ ржХрж░рждрзЗ рж╕ржорзАржХрж░ржгржЯрж┐ рж╕ржорж╛ржзрж╛ржи ржХрж░рзБржиред")
    print("\nрж╕рзВрждрзНрж░: рж╕рзЛрзЯрж╛рж░рзНржЬрж╢рж┐рж▓рзНржб ржмрзНржпрж╛рж╕рж╛рж░рзНржз (Schwarzschild Radius) $R_s = 2GM/c^2$")
    print("ржпржжрж┐ $G=1, M=1, c=1$ рж╣рзЯ, рждржмрзЗ $R_s$ ржПрж░ ржорж╛ржи ржХржд?")
    ans = input("ржЙрждрзНрждрж░ ржжрж┐ржи: ").strip()
    return ans == "2"

# рзи. ржРрждрж┐рж╣рж╛рж╕рж┐ржХ ржУ рж░рж╛ржЬржирзИрждрж┐ржХ ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬ
def history_politics_challenge():
    typing_effect("\n[рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓рзЗржнрзЗрж▓ рзи]: ржЗрждрж┐рж╣рж╛рж╕ ржУ рж╕ржВржмрж┐ржзрж╛ржи ржоржбрж┐ржЙрж▓ред")
    typing_effect("ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзЗрж░ рж╕ржВржмрж┐ржзрж╛ржирзЗрж░ ржХрзЛржи ржЕржирзБржЪрзНржЫрзЗржж ржЕржирзБржпрж╛рзЯрзА рж░рж╛рж╖рзНржЯрзНрж░ржкрждрж┐ 'ржЬрж░рзБрж░рж┐ ржЕржмрж╕рзНржерж╛' ржШрзЛрж╖ржгрж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи?")
    ans = input("ржЕржирзБржЪрзНржЫрзЗржж ржиржорзНржмрж░ ржжрж┐ржи: ").strip()
    return ans == "141" or ans == "141a"

# рзй. ржЧрж╛ржгрж┐рждрж┐ржХ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи
def calculus_challenge():
    typing_effect("\n[рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓рзЗржнрзЗрж▓ рзй]: ржЙржЪрзНржЪрждрж░ ржЧрж╛ржгрж┐рждрж┐ржХ ржоржбрж┐ржЙрж▓ред")
    typing_effect("ржЪрзБрж▓рзНрж▓рж┐рж░ рж╢рзАрждрж▓рзАржХрж░ржг рждрж░рж▓ ржкрзНрж░ржмрж╛рж╣рзЗрж░ рж╣рж╛рж░ $f(x) = x^2$ рж╣рж▓рзЗ, $x=5$ ржП ржПрж░ ржорж╛ржи ржХржд?")
    ans = input("ржорж╛ржи ржжрж┐ржи: ").strip()
    return ans == "25"

# рзк. ржлрж┐ржЬрж┐ржХрзНрж╕ рж▓ржЬрж┐ржХ
def physics_logic():
    typing_effect("\n[рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓рзЗржнрзЗрж▓ рзк]: ржХржгрж╛ ржкржжрж╛рж░рзНржержмрж┐ржЬрзНржЮрж╛ржи ржоржбрж┐ржЙрж▓ред")
    typing_effect("ржЗржЙрж░рзЗржирж┐рзЯрж╛ржо-рзирзйрзл ржПрж░ ржирж┐ржЙржХрзНрж▓рж┐рзЯрж╛рж╕рзЗ ржХрзЯржЯрж┐ ржирж┐ржЙржЯрзНрж░ржи ржерж╛ржХрзЗ?")
    ans = input("рж╕ржВржЦрзНржпрж╛ржЯрж┐ рж▓рж┐ржЦрзБржи: ").strip()
    return ans == "143"

# рзл. ржХрзЛржб ржмрзНрж░рзЗржХрж┐ржВ (рж░рзНржпрж╛ржирзНржбржо ржзрж╛ржБржзрж╛)
def code_breaking():
    typing_effect("\n[рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓рзЗржнрзЗрж▓ рзл]: рж╕рж╛ржЗржлрж╛рж░ ржмрзНрж░рзЗржХрж┐ржВред")
    word = "REACTOR"
    scrambled = "".join(random.sample(word, len(word)))
    print(f"ржПржЗ рж╢ржмрзНржжржЯрж┐ рж╕рж╛ржЬрж┐рзЯрзЗ рж╕ржарж┐ржХ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржмрзЗрж░ ржХрж░рзБржи: {scrambled}")
    ans = input("рж╕ржарж┐ржХ рж╢ржмрзНржж: ").strip().upper()
    return ans == "REACTOR"

# рзм. ржерж╛рж░рзНржорзЛржбрж╛ржЗржирж╛ржорж┐ржХрж╕ рж╕ржорж╕рзНржпрж╛
def thermal_math():
    typing_effect("\n[рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓рзЗржнрзЗрж▓ рзм]: рждрж╛ржкржЧрждрж┐ржмрж┐ржжрзНржпрж╛ред")
    typing_effect("ржмрзЯрзЗрж▓рзЗрж░ рж╕рзВрждрзНрж░ ржЕржирзБржпрж╛рзЯрзА, рж╕рзНржерж┐рж░ рждрж╛ржкржорж╛рждрзНрж░рж╛рзЯ ржЪрж╛ржк ржмрж╛рзЬрж▓рзЗ ржЖрзЯрждржирзЗрж░ ржХрзА ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ?")
    print("ржХ) ржмрж╛рзЬрзЗ  ржЦ) ржХржорзЗ  ржЧ) ржПржХржЗ ржерж╛ржХрзЗ")
    ans = input("ржЖржкржирж╛рж░ ржЙрждрзНрждрж░ (ржХ/ржЦ/ржЧ): ").strip().lower()
    return ans == "ржЦ" or ans == "b"

# рзн. ржЪрзВрзЬрж╛ржирзНржд рж╢рж╛ржЯржбрж╛ржЙржи ржХрзЛржб
def final_shutdown():
    typing_effect("\n[рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ рж▓рзЗржнрзЗрж▓ рзн]: ржЪрзВрзЬрж╛ржирзНржд ржХржорж╛ржирзНржбред")
    typing_effect("ржПржХржЬржи ржжрзЗрж╢ржкрзНрж░рзЗржорж┐ржХ рж░рж╛ржЬржирзАрждрж┐ржмрж┐ржж рж╣рж┐рж╕рзЗржмрзЗ ржЪрзБрж▓рзНрж▓рж┐ржЯрж┐ ржмржирзНржз ржХрж░рж╛рж░ рж╢ржкрже ржирж┐ржиред")
    ans = input("ржЯрж╛ржЗржк ржХрж░рзБржи 'SAVE THE NATION': ").strip().upper()
    return ans == "SAVE THE NATION"

def start_mission():
    global REACTOR_TEMP, PRESSURE
    clear()
    typing_effect("рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛! рж░рзВржкржкрзБрж░ ржкрж╛рж░ржорж╛ржгржмрж┐ржХ ржХрзЗржирзНржжрзНрж░рзЗрж░ ржЪрзБрж▓рзНрж▓рж┐ рж▓ржХ рж╣рзЯрзЗ ржЧрзЗржЫрзЗред")
    typing_effect("ржЧржмрзЗрж╖ржХ, ржЖржкржирж╛рж░ рж╣рж╛рждрзЗ рж╕ржорзЯ ржЦрзБржм ржХржоред ржЪрзБрж▓рзНрж▓рж┐ржЯрж┐ ржарж╛ржирзНржбрж╛ ржХрж░рзБржи ржирждрзБржмрж╛ ржмрж┐ржкрж░рзНржпрзЯ ржЕржирж┐ржмрж╛рж░рзНржпред")
    
    challenges = [astrophysics_challenge, history_politics_challenge, calculus_challenge, 
                  physics_logic, code_breaking, thermal_math, final_shutdown]
    
    for i in range(SECURITY_LAYERS):
        show_status(i)
        if challenges[i]():
            typing_effect("\nтЬЕ ржЧрзЗржЯ ржЖржирж▓ржХ рж╣рзЯрзЗржЫрзЗ! рждрж╛ржкржорж╛рждрзНрж░рж╛ рзл% ржХржорзЗржЫрзЗред", 0.01)
            REACTOR_TEMP -= (REACTOR_TEMP * 0.05)
            PRESSURE -= 5
        else:
            typing_effect("\nтЭМ ржнрзБрж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб! ржЕрзНржпрж╛рж▓рж╛рж░рзНржо ржмрж╛ржЬржЫрзЗ! рждрж╛ржкржорж╛рждрзНрж░рж╛ ржмрж╛рзЬржЫрзЗ!", 0.01)
            REACTOR_TEMP += 150
            PRESSURE += 20
        
        if REACTOR_TEMP >= MELTDOWN_TEMP:
            print("\n" + "ЁЯФе" * 20)
            typing_effect("ржмрж┐рж╕рзНржлрзЛрж░ржг! ржЪрзБрж▓рзНрж▓рж┐ ржЧрж▓рзЗ ржЧрзЗржЫрзЗред ржЧрзЗржо ржУржнрж╛рж░ред")
            return
        
        time.sleep(1.5)
        clear()

    if REACTOR_TEMP < MELTDOWN_TEMP:
        show_status(7)
        typing_effect("\nЁЯОЙ ржЕржнрж┐ржиржирзНржжржи! ржЖржкржирж┐ рж╕ржлрж▓ржнрж╛ржмрзЗ ржЪрзБрж▓рзНрж▓рж┐ржЯрж┐ ржарж╛ржирзНржбрж╛ ржХрж░рзЗржЫрзЗржиред")
        typing_effect("ржЖржкржирж╛рж░ рж░рж╛ржЬржирзИрждрж┐ржХ ржПржмржВ ржмрзИржЬрзНржЮрж╛ржирж┐ржХ ржжржХрзНрж╖рждрж╛ ржЖржЬ ржжрзЗрж╢ржХрзЗ рж░ржХрзНрж╖рж╛ ржХрж░рзЗржЫрзЗред")

if __name__ == "__main__":
    start_mission()
